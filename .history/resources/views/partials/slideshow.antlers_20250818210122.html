{# Homepage Slideshow Component #}
<div class="container-upper-right">
    <h1>{{ slideshowTitle ?? 'Nieuws & Opkomende Evenementen' }}</h1>          
    <div class="upper-right box" id="slideshow">
        {% set slides = craft.entries.section('nieuws').limit(3).all() %}
        {% if slides %}
            {% for slide in slides %}
                <div class="slide">
                    {% if slide.slideshowImage|length %}
                        <img src="{{ slide.slideshowImage.one().url }}" alt="{{ slide.slideshowImage.one().alt ?: slide.title }}">
                    {% endif %}
                    <div class="slide-text">
                        <h2>{{ slide.title }}</h2>
                        <p>{{ slide.excerpt ?: slide.body|striptags|truncate(200) }}</p>
                        {% if slide.url %}
                            <a href="{{ slide.url }}" class="meer-button">Meer info</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            {# Fallback content if no entries exist #}
            <div class="slide">
                <img src="{{ craft.app.assetManager.getPublishedUrl('@webroot/assets/images/slideshow/1image.jpg', true) }}" alt="Pizzabak evenement">
                <div class="slide-text">
                    <h2>Pizzabak</h2>
                    <p>TC organiseert weer een pizzabak voor onze nieuwe lokalen! Wij maken overheerlijke ambachtelijke pizza's die jullie 24 november kunnen komen ophalen op de scouts en thuis gewoon nog even moeten afbakken. We maken de pizza's zelf in samenwerking met broodbroeders.</p>
                    <button class="meer-button">Meer info</button>
                </div>
            </div>
        {% endif %}
    </div>
    
    <div class="slideshow-dots">
        {% for i in range(0, slides|length - 1) %}
            <span class="dot" onclick="currentSlide({{ i }})"></span>
        {% endfor %}
    </div>
</div>
